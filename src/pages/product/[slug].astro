---
import Layout from '../../layouts/Layout.astro';
import CloudinaryImage from '../../components/CloudinaryImage.astro';

// This will be populated from Sanity CMS in production
// For now, showing the structure and placeholder content

export function getStaticPaths() {
  // In production, this will fetch from Sanity
  // Example structure for one product:
  return [
    {
      params: { slug: 'alpet-d2-surface-sanitizer' },
      props: {
        product: {
          title: 'Alpet D2 Surface Sanitizer Spray',
          slug: 'alpet-d2-surface-sanitizer',
          description: 'Alpet D2 Sanitizer is a highly evaporative, effective sanitizer that kills bacteria and other pathogens. Clean, sanitize and disinfect food contact and non-porous surfaces within your facility quickly and easily.',
          longDescription: 'Alpet D2 Spray is produced with the same reliable formula as Alpet D2 Wipes that will kill 99.9% of bacteria in 10 seconds. The 58 ipa quat formula eliminates more tested pathogens than normal sanitizers. Packaged in convenient quart bottles with trigger sprayers, as well as 5 gallon pails and 50 gallon drums, sanitizing food contact surfaces is made simple with Alpet D2 Surface Sanitizer Spray.',
          price: '$15.99',
          category: 'Surface Sanitizers',
          image: '6721089132f74036c0c7c9d5_alpet_d2_surface_sanitizer_case',
          features: [
            'Clean, Sanitize and Disinfect food contact and non-food contact surfaces with one product',
            'Ready-to-Use, no-rinse required',
            '70% Alcohol Formula (62.5% ethanol / 7.5% isopropanol)',
            'Highly Evaporative and ideal for low moisture environments and water sensitive equipment',
            '60 Second Kill on food contact surfaces, including rubber gloves'
          ],
          bestSuitedFor: [
            'Food processing facilities',
            'Commercial kitchens',
            'Food service operations',
            'Industrial hygiene'
          ],
          documents: [
            { name: 'Safety Data Sheet', type: 'SDS' },
            { name: 'Technical Specifications', type: 'TECH' },
            { name: 'EPA Registration', type: 'CERT' }
          ]
        }
      }
    }
  ];
}

const { product } = Astro.props;
---

<Layout
  title={`${product.title} | D2 Sanitizers`}
  description={product.description}
>
  <main class="py-16 md:py-24">
    {/* Product Hero Section */}
    <section class="container mx-auto px-6 mb-16">
      <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 max-w-6xl mx-auto">
        {/* Product Image */}
        <div class="relative">
          <div class="sticky top-8">
            <div class="bg-white rounded-2xl shadow-xl overflow-hidden">
              <CloudinaryImage
                publicId={`d2-sanitizers/products/${product.image}`}
                alt={product.title}
                width={800}
                height={800}
                crop="fill"
                class="w-full h-auto"
              />
            </div>
          </div>
        </div>

        {/* Product Info */}
        <div>
          <div class="mb-4">
            <a href={`/${product.category.toLowerCase().replace(/\s+/g, '-')}`} class="text-primary hover:text-cyan font-bold text-sm">
              ‚Üê Back to {product.category}
            </a>
          </div>

          <h1 class="font-heading font-bold text-3xl md:text-4xl lg:text-5xl text-navy mb-4">
            {product.title}
          </h1>

          <p class="text-2xl font-bold text-primary mb-6">
            {product.price}
          </p>

          <p class="text-lg text-gray-700 leading-relaxed mb-8">
            {product.description}
          </p>

          {/* Add to Cart Button */}
          <div class="mb-8">
            <button
              type="button"
              class="w-full md:w-auto px-12 py-4 bg-primary text-white font-bold rounded-lg hover:bg-cyan transition-colors duration-300 shadow-lg hover:shadow-xl"
              onclick="alert('Cart functionality will be integrated with Shopify')"
            >
              Add to Cart
            </button>
          </div>

          {/* Trust Badges */}
          <div class="flex flex-wrap gap-4 mb-8 pb-8 border-b border-gray-200">
            <div class="flex items-center gap-2">
              <svg class="w-5 h-5 text-green-600" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
              </svg>
              <span class="text-sm text-gray-700">FDA Compliant</span>
            </div>
            <div class="flex items-center gap-2">
              <svg class="w-5 h-5 text-green-600" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
              </svg>
              <span class="text-sm text-gray-700">No Rinse Required</span>
            </div>
            <div class="flex items-center gap-2">
              <svg class="w-5 h-5 text-green-600" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
              </svg>
              <span class="text-sm text-gray-700">Fast Acting</span>
            </div>
          </div>

          {/* Product Details */}
          <div class="mb-8">
            <h2 class="font-heading font-bold text-2xl text-navy mb-4">
              Product Features
            </h2>
            <ul class="space-y-3">
              {product.features.map((feature) => (
                <li class="flex items-start gap-3">
                  <svg class="w-6 h-6 text-primary flex-shrink-0 mt-0.5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
                  </svg>
                  <span class="text-gray-700">{feature}</span>
                </li>
              ))}
            </ul>
          </div>

          {/* Best Suited For */}
          <div class="bg-light-blue p-6 rounded-xl mb-8">
            <h3 class="font-heading font-bold text-xl text-navy mb-3">
              Best Suited For:
            </h3>
            <ul class="space-y-2">
              {product.bestSuitedFor.map((use) => (
                <li class="flex items-center gap-2">
                  <span class="w-2 h-2 bg-primary rounded-full"></span>
                  <span class="text-gray-700">{use}</span>
                </li>
              ))}
            </ul>
          </div>
        </div>
      </div>
    </section>

    {/* Additional Details Section */}
    <section class="bg-gray-50 py-16">
      <div class="container mx-auto px-6 max-w-6xl">
        <h2 class="font-heading font-bold text-3xl text-navy mb-8">
          Additional Information
        </h2>
        <div class="bg-white rounded-xl shadow-md p-8">
          <p class="text-gray-700 leading-relaxed">
            {product.longDescription}
          </p>
        </div>
      </div>
    </section>

    {/* Supporting Documents */}
    <section class="container mx-auto px-6 py-16 max-w-6xl">
      <h2 class="font-heading font-bold text-3xl text-navy mb-8">
        Supporting Documents
      </h2>
      <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
        {product.documents.map((doc) => (
          <a
            href="#"
            class="bg-white p-6 rounded-xl shadow-md hover:shadow-lg transition-shadow duration-300 flex items-center gap-4"
          >
            <div class="w-12 h-12 bg-primary rounded-lg flex items-center justify-center flex-shrink-0">
              <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
              </svg>
            </div>
            <div>
              <p class="font-bold text-navy">{doc.name}</p>
              <p class="text-sm text-gray-600">PDF Download</p>
            </div>
          </a>
        ))}
      </div>
    </section>

    {/* Call to Action */}
    <section class="bg-navy py-16">
      <div class="container mx-auto px-6 text-center">
        <h2 class="font-heading font-bold text-3xl md:text-4xl text-white mb-6">
          Need Help Choosing the Right Product?
        </h2>
        <p class="text-xl text-gray-300 mb-8 max-w-2xl mx-auto">
          Our team can help you find the perfect sanitization solution for your facility.
        </p>
        <a
          href="/contact"
          class="inline-block px-8 py-4 bg-cyan text-navy font-bold rounded-lg hover:bg-white transition-colors duration-300 shadow-lg hover:shadow-xl"
        >
          Contact Our Team
        </a>
      </div>
    </section>
  </main>
</Layout>

<script>
  // Product page interactivity will be added here
  // e.g., image gallery, quantity selector, variant picker
</script>